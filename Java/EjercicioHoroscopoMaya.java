package m3.uf1.practicahoroscopo;
import java.util.Scanner;
import java.text.SimpleDateFormat;
import java.util.Date;
 
/** programa que pide una fecha de nacimiento y muestra qué nahual(Horoscopo Maya) te corresponde. 
 * Filtrar que la fecha sea correcta, con formato correcto y entre 1926 y la fecha actual.
 * Utilizar las mínimas variables posibles, aprovechando el uso de arrays. 
 * El programa continuará hasta que se proporciona el 0.
 *
 * @author CARLOS FLORES
 * @version 2.0 23-dic-2018
 */
public class ExHoroscopoMaya {
    public static void main(String[] args) {
        Scanner entrada=new Scanner(System.in);
        int [][] años= {{1926, 223, 254, 22, 53, 83, 114, 144, 175, 206, 236, 7, 37},{1927, 68, 99, 127, 158, 188, 219, 249, 20, 51, 81, 112, 142},{1928, 173, 204, 233, 4, 34, 65, 95, 126, 157, 187, 218, 248},
                {1929, 19, 50, 78, 109, 139, 170, 200, 231, 2, 32, 63, 93},{1930, 124, 155, 183, 214, 244, 15, 45, 76, 107, 137, 168, 198},{1931, 229, 260, 28, 59, 89, 120, 150, 181, 212, 242, 13, 43},
                {1932, 74, 105, 134, 165, 195, 226, 256, 27, 58, 88, 119, 149},{1933, 180, 211, 239, 10, 40, 71, 101, 132, 163, 193, 224, 254},{1934, 25, 56, 84, 115, 145, 176, 206, 237, 8, 38, 69, 99},
                {1935, 130, 161, 189, 220, 250, 21, 51, 82, 113, 143, 174, 204}, {1936, 235, 6, 35, 66, 96, 127, 157, 188, 219, 249, 20, 50}, {1937, 81, 112, 140, 171, 201, 232, 2, 33, 64, 94, 125, 155},
                {1938, 186, 217, 245, 16, 46, 77, 107, 138, 169, 199, 230, 260},{1939, 31, 62, 90, 121, 151, 182, 212, 243, 14, 44, 75, 105},{1940, 136, 167, 196, 227, 257, 28, 58, 89, 120, 150, 181, 211},
                {1941, 242, 13, 41, 72, 102, 133, 163, 194, 225, 255, 26, 56},{1942, 87, 118, 146, 177, 207, 238, 8, 39, 70, 100, 131, 161},{1943, 192, 223, 251, 22, 52, 83, 113, 144, 175, 205, 236, 6},
                {1944, 37, 68, 97, 128, 158, 189, 219, 250, 21, 51, 82, 112},{1945, 143, 174, 202, 233, 3, 34, 64, 95, 126, 156, 187, 217},{1946, 248, 19, 47, 78, 108, 139, 169, 200, 231, 1, 32, 62},
                {1947, 93, 124, 152, 183, 213, 244, 14, 45, 76, 106, 137, 167},{1948, 198, 229, 258, 29, 59, 90, 120, 151, 182, 212, 243, 13},{1949, 44, 75, 103, 134, 164, 195, 225, 256, 27, 57, 88, 118},
                {1950, 149, 180, 208, 239, 9, 40, 70, 101, 132, 162, 193, 223}, {1951, 254, 25, 53, 84, 114, 145, 175, 206, 237, 7, 38, 68},{1952, 99, 130, 159, 190, 220, 251, 21, 52, 83, 113, 144, 174},
                {1953, 205, 236, 4, 35, 65, 96, 126, 157, 188, 218, 249, 19},{1954, 50, 81, 109, 140, 170, 201, 231, 2, 33, 63, 94, 124}, {1955, 155, 186, 214, 245, 15, 46, 76, 107, 138, 168, 199, 229},
                {1956, 260, 31, 60, 91, 121, 152, 182, 213, 244, 14, 45, 75},{1957, 106, 137, 165, 196, 226, 257, 27, 58, 89, 119, 150, 180},{1958, 211, 242, 10, 41, 71, 102, 132, 163, 194, 224, 255, 25},
                {1959, 56, 87, 115, 146, 176, 207, 237, 8, 39, 69, 100, 130},{1960, 161, 192, 221, 252, 22, 53, 83, 114, 145, 175, 206, 236},{1961, 7, 38, 66, 97, 127, 158, 188, 219, 250, 20, 51, 81},
                {1962, 112, 143, 171, 202, 232, 3, 33, 64, 95, 125, 156, 186},{1963, 217, 248, 16, 47, 77, 108, 138, 169, 200, 230, 1, 31},{1964, 62, 93, 122, 153, 183, 214, 244, 15, 46, 76, 107, 137},
                {1965, 168, 199, 227, 258, 28, 59, 89, 120, 151, 181, 212, 242},{1966, 13, 44, 72, 103, 133, 164, 194, 225, 256, 26, 57, 87},{1967, 118, 149, 177, 208, 238, 9, 39, 70, 101, 131, 162, 192},
                {1968, 223, 254, 23, 54, 84, 115, 145, 176, 207, 237, 8, 38},{1969, 69, 100, 128, 159, 189, 220, 250, 21, 52, 82, 113, 143},{1970, 174, 205, 233, 4, 34, 65, 95, 126, 157, 187, 218, 248},
                {1971, 19, 50, 78, 109, 139, 170, 200, 231, 2, 32, 63, 93},{1972, 124, 155, 184, 215, 245, 16, 46, 77, 108, 138, 169, 199},{1973, 230, 1, 29, 60, 90, 121, 151, 182, 213, 243, 14, 44},
                {1974, 75, 106, 134, 165, 195, 226, 256, 27, 58, 88, 119, 149},{1975, 180, 211, 239, 10, 40, 71, 101, 132, 163, 193, 224, 254},{1976, 25, 56, 85, 116, 146, 177, 207, 238, 9, 39, 70, 100},
                {1977, 131, 162, 190, 221, 251, 22, 52, 83, 114, 144, 175, 205},{1978, 236, 7, 35, 66, 96, 127, 157, 188, 219, 249, 20, 50},{1979, 81, 112, 140, 171, 201, 232, 2, 33, 64, 94, 125, 155},
                {1980, 186, 217, 246, 17, 47, 78, 108, 139, 170, 200, 231, 1},{1981, 32, 63, 91, 122, 152, 183, 213, 244, 15, 45, 76, 106},{1982, 137, 168, 196, 227, 257, 28, 58, 89, 120, 150, 181, 211},
                {1983, 242, 13, 41, 72, 102, 133, 163, 194, 225, 255, 26, 56},{1984, 87, 118, 147, 178, 208, 239, 9, 40, 71, 101, 132, 162},{1985, 193, 224, 252, 23, 53, 84, 114, 145, 176, 206, 237, 7},
                {1986, 38, 69, 97, 128, 158, 189, 219, 250, 21, 51, 82, 112},{1987, 143, 174, 202, 233, 3, 34, 64, 95, 126, 156, 187, 217},{1988, 248, 19, 48, 79, 109, 140, 170, 201, 232, 2, 33, 63},
                {1989, 94, 125, 153, 184, 214, 245, 15, 46, 77, 107, 138, 168},{1990, 199, 230, 258, 29, 59, 90, 120, 151, 182, 212, 243, 13},{1991, 44, 75, 103, 134, 164, 195, 225, 256, 27, 57, 88, 118},
                {1992, 149, 180, 209, 240, 10, 41, 71, 102, 133, 163, 194, 224},{1993, 255, 26, 54, 85, 115, 146, 176, 207, 238, 8, 39, 69},{1994, 100, 131, 159, 190, 220, 251, 21, 52, 83, 113, 144, 174},
                {1995, 205, 236, 4, 35, 65, 96, 126, 157, 188, 218, 249, 19},{1996, 50, 81, 110, 141, 171, 202, 232, 3, 34, 64, 95, 125},{1997, 156, 187, 215, 246, 16, 47, 77, 108, 139, 169, 200, 230},
                {1998, 1, 32, 60, 91, 121, 152, 182, 213, 244, 14, 45, 75},{1999, 106, 137, 165, 196, 226, 257, 27, 58, 89, 119, 150, 180},{2000, 211, 242, 11, 42, 72, 103, 133, 164, 195, 225, 256, 26},
                {2001, 57, 88, 116, 147, 177, 208, 238, 9, 40, 70, 101, 131},{2002, 162, 193, 221, 252, 22, 53, 83, 114, 145, 175, 206, 236},{2003, 7, 38, 66, 97, 127, 158, 188, 219, 250, 20, 51, 81},
                {2004, 112, 143, 172, 203, 233, 4, 34, 65, 96, 126, 157, 187},{2005, 218, 249, 17, 48, 78, 109, 139, 170, 201, 231, 2, 32},{2006, 63, 94, 122, 153, 183, 214, 244, 15, 46, 76, 107, 137},
                {2007, 168, 199, 227, 258, 28, 59, 89, 120, 151, 181, 212, 242},{2008, 13, 44, 73, 104, 134, 165, 195, 226, 257, 27, 58, 88},{2009, 119, 150, 178, 209, 239, 10, 40, 71, 102, 132, 163, 193},
                {2010, 224, 255, 23, 54, 84, 115, 145, 176, 207, 237, 8, 38},{2011, 69, 100, 128, 159, 189, 220, 250, 21, 52, 82, 113, 143},{2012, 174, 205, 234, 5, 35, 66, 96, 127, 158, 188, 219, 249},
                {2013, 20, 51, 79, 110, 140, 171, 201, 232, 3, 33, 64, 94},{2014, 125, 156, 184, 215, 245, 16, 46, 77, 108, 138, 169, 199},{2015, 230, 1, 29, 60, 90, 121, 151, 182, 213, 243, 14, 44},
                {2016, 75, 106, 135, 166, 196, 227, 257, 28, 59, 89, 120, 150},{2017, 181, 212, 240, 11, 41, 72, 102, 133, 164, 194, 225, 255},{2018, 26, 57, 85, 116, 146, 177, 207, 238, 9, 39, 70, 100},
                {2019, 131, 162, 190, 221, 251, 22, 52, 83, 114, 144, 175, 205},{2020, 236, 7, 36, 67, 97, 128, 158, 189, 220, 250, 21, 51},{2021, 82, 113, 141, 172, 202, 233, 3, 34, 65, 95, 126, 156},
                {2022, 187, 218, 246, 17, 47, 78, 108, 139, 170, 200, 231, 1},{2023, 32, 63, 91, 122, 152, 183, 213, 244, 15, 45, 76, 106},{2024, 137, 168, 197, 228, 258, 29, 59, 90, 121, 151, 182, 212},
                {2025, 243, 14, 42, 73, 103, 134, 164, 195, 226, 256, 27, 57}
        };
       String [] []signos={{"B'atz'","  Mono"},{"E","Gato Montes",},{"Aj'","Armadillo"},{"I'x","Jaguar"},{"Tz'ikin","Aguila"},
           {"Ajmaq","Condor"},{"No'j","Pajaro Carpintero"},{"Tijax","Tucan"},{"Kawoq","Tortuga"},{"Ajpu","Caracol"},
           {"Imox","Lagarto"},{"Iq'","Colibri"},{"Aq'ab'al","Murcielago"},{"K'at","Araña"},{"Kan","Serpiente"},
           {"Kame","Lechuza"},{"Kej","Cordero"},{"Q'anil","Conejo"},{"Toj","Tiburon"},{"Tz'i'","Coyote"}};
 int año,dia,mes;   
 boolean valido=true;
 Date testDate = null;
 SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy");
       boolean salir=false;
do{
    
    do{
             String fecha;
            testDate = null;
            do{
                valido=true;
                System.out.println("Introduzca una fecha entre 1926 y la fecha actual con formato dd/mm/yyyy");
                Scanner entrad=new Scanner(System.in);
            fecha = entrad.nextLine();
        //Filtramos de fecha validando la fecha entrada con la variable testDate
        try{
            testDate = df.parse(fecha);
        } catch (Exception e){ System.out.println("Formato invalido");
        valido=false;}}
            while(!valido);
 
        if (!df.format(testDate).equals(fecha)){
            System.out.println("Fecha invalida!!");
            valido=false;
        } else {
            valido=true;
        }
        
         //Convertimos de String a int  y separamos los datos de la variable fecha
    String[] parts = fecha.split("/");
String aux = parts[0];
dia = Integer.parseInt(aux);
aux = parts[1];
mes =Integer.parseInt(aux);
aux = parts[2];
año = Integer.parseInt(aux);
        if (año<1926 || año>2018){
            System.out.println("Fecha fuera de rango");
        }
        }while(!valido || año<1926 || año>2018);
        
    //Buscamos en el array de años la fecha introducida y sumamos el dia y mes
        int cont=0;
        boolean encontrado=false;
        int suma=0;
        while(cont<años.length && !encontrado ){
            if (año==años[cont][0]){
                suma=dia+años[cont][mes];
                encontrado=true;
            }
            else {cont++;}
        }
        //Bucle para simplificar la busqueda del nahual
        while(suma>20){
            suma=suma-20;
        }
          
        
        System.out.println("Tu signo es: "+signos[suma-1][0]+" que significa "+signos[suma-1][1]+"\n");
        int tecla;
        do
        {System.out.println("Pulsa la tecla 1 para consultar otro nahual\nPulsa la tecla 0 para salir");
        tecla=entrada.nextInt();
        if (tecla==1){
            salir=false;
        }
        else if(tecla==0){
            salir=true;
            System.out.println("Adios!!");}
        else{System.out.println("Opcion incorrecta");}
        }
        while(tecla!=0 && tecla!=1);
            
        }while(!salir);
    }
}
